-- MySQL Script generated by MySQL Workbench
-- Tue Oct 31 14:02:30 2023
-- Model: New Model    Version: 1.0
-- MySQL Workbench Forward Engineering

SET @OLD_UNIQUE_CHECKS=@@UNIQUE_CHECKS, UNIQUE_CHECKS=0;
SET @OLD_FOREIGN_KEY_CHECKS=@@FOREIGN_KEY_CHECKS, FOREIGN_KEY_CHECKS=0;
SET @OLD_SQL_MODE=@@SQL_MODE, SQL_MODE='ONLY_FULL_GROUP_BY,STRICT_TRANS_TABLES,NO_ZERO_IN_DATE,NO_ZERO_DATE,ERROR_FOR_DIVISION_BY_ZERO,NO_ENGINE_SUBSTITUTION';

-- -----------------------------------------------------
-- Schema mydb
-- -----------------------------------------------------
-- -----------------------------------------------------
-- Schema ssafypjt
-- -----------------------------------------------------

-- -----------------------------------------------------
-- Schema ssafypjt
-- -----------------------------------------------------
CREATE SCHEMA IF NOT EXISTS `ssafypjt` ;
USE `ssafypjt` ;

-- -----------------------------------------------------
-- Table `ssafypjt`.`sido`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `ssafypjt`.`sido` (
  `sido_code` INT NOT NULL,
  `sido_name` VARCHAR(30) NULL DEFAULT NULL,
  PRIMARY KEY (`sido_code`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `ssafypjt`.`gugun`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `ssafypjt`.`gugun` (
  `gugun_code` INT NOT NULL,
  `gugun_name` VARCHAR(30) NULL DEFAULT NULL,
  `sido_code` INT NOT NULL,
  PRIMARY KEY (`gugun_code`, `sido_code`),
  INDEX `gugun_to_sido_sido_code_fk_idx` (`sido_code` ASC) VISIBLE,
  CONSTRAINT `gugun_to_sido_sido_code_fk`
    FOREIGN KEY (`sido_code`)
    REFERENCES `ssafypjt`.`sido` (`sido_code`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `ssafypjt`.`attraction_info`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `ssafypjt`.`attraction_info` (
  `content_id` INT NOT NULL,
  `content_type_id` INT NULL DEFAULT NULL,
  `title` VARCHAR(100) NULL DEFAULT NULL,
  `addr1` VARCHAR(100) NULL DEFAULT NULL,
  `addr2` VARCHAR(50) NULL DEFAULT NULL,
  `zipcode` VARCHAR(50) NULL DEFAULT NULL,
  `tel` VARCHAR(50) NULL DEFAULT NULL,
  `first_image` VARCHAR(200) NULL DEFAULT NULL,
  `first_image2` VARCHAR(200) NULL DEFAULT NULL,
  `readcount` INT NULL DEFAULT NULL,
  `sido_code` INT NULL DEFAULT NULL,
  `gugun_code` INT NULL DEFAULT NULL,
  `latitude` DECIMAL(20,17) NULL DEFAULT NULL,
  `longitude` DECIMAL(20,17) NULL DEFAULT NULL,
  `mlevel` VARCHAR(2) NULL DEFAULT NULL,
  PRIMARY KEY (`content_id`),
  INDEX `attraction_to_content_type_id_fk_idx` (`content_type_id` ASC) VISIBLE,
  INDEX `attraction_to_sido_code_fk_idx` (`sido_code` ASC) VISIBLE,
  INDEX `attraction_to_gugun_code_fk_idx` (`gugun_code` ASC) VISIBLE,
  CONSTRAINT `attraction_to_content_type_id_fk`
    FOREIGN KEY (`content_type_id`)
    REFERENCES `ssafypjt`.`content_type` (`content_type_id`),
  CONSTRAINT `attraction_to_gugun_code_fk`
    FOREIGN KEY (`gugun_code`)
    REFERENCES `ssafypjt`.`gugun` (`gugun_code`),
  CONSTRAINT `attraction_to_sido_code_fk`
    FOREIGN KEY (`sido_code`)
    REFERENCES `ssafypjt`.`sido` (`sido_code`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `ssafypjt`.`attraction_description`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `ssafypjt`.`attraction_description` (
  `content_id` INT NOT NULL,
  `homepage` VARCHAR(100) NULL DEFAULT NULL,
  `overview` VARCHAR(10000) NULL DEFAULT NULL,
  `telname` VARCHAR(45) NULL DEFAULT NULL,
  PRIMARY KEY (`content_id`),
  CONSTRAINT `attraction_detail_to_attraciton_id_fk`
    FOREIGN KEY (`content_id`)
    REFERENCES `ssafypjt`.`attraction_info` (`content_id`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `ssafypjt`.`attraction_detail`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `ssafypjt`.`attraction_detail` (
  `content_id` INT NOT NULL,
  `cat1` VARCHAR(3) NULL DEFAULT NULL,
  `cat2` VARCHAR(5) NULL DEFAULT NULL,
  `cat3` VARCHAR(9) NULL DEFAULT NULL,
  `created_time` VARCHAR(14) NULL DEFAULT NULL,
  `modified_time` VARCHAR(14) NULL DEFAULT NULL,
  `booktour` VARCHAR(5) NULL DEFAULT NULL,
  PRIMARY KEY (`content_id`),
  CONSTRAINT `attraction_detail_to_basic_content_id_fk`
    FOREIGN KEY (`content_id`)
    REFERENCES `ssafypjt`.`attraction_info` (`content_id`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `ssafypjt`.`badwords`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `ssafypjt`.`badword` (
  `bad_no` INT NOT NULL AUTO_INCREMENT,
  `fword` VARCHAR(2000) NULL DEFAULT NULL,
  PRIMARY KEY (`bad_no`))
ENGINE = InnoDB
AUTO_INCREMENT = 1
COLLATE = utf8mb4_0900_ai_ci;

-- -----------------------------------------------------
-- Table `ssafypjt`.`users`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `ssafypjt`.`users` (
  `user_id` VARCHAR(16) NOT NULL,
  `user_name` VARCHAR(20) NOT NULL,
  `user_pwd` VARCHAR(100) NOT NULL,
  `user_email_id` VARCHAR(20) NOT NULL,
  `user_email_domain` VARCHAR(60) NULL DEFAULT 'ssafy.com',
  `user_join_date` TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,
  `user_status` VARCHAR(10) NOT NULL DEFAULT 'true',
  `token` VARCHAR(1000) null default null, 
  PRIMARY KEY (`user_id`))
ENGINE = InnoDB
COLLATE = utf8mb4_0900_ai_ci;

# 유저 휴먼 상태 확인할 컬럼 -> 보류
# `user_last_login` TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,

SET SQL_MODE=@OLD_SQL_MODE;
SET FOREIGN_KEY_CHECKS=@OLD_FOREIGN_KEY_CHECKS;
SET UNIQUE_CHECKS=@OLD_UNIQUE_CHECKS;

-- -----------------------------------------------------
-- Table `ssafypjt`.`board`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `ssafypjt`.`board` (
  `board_no` INT NOT NULL AUTO_INCREMENT,
  `user_id` VARCHAR(16) NULL DEFAULT NULL,
  `board_title` VARCHAR(100) NULL DEFAULT NULL,
  `board_content` VARCHAR(2000) NULL DEFAULT NULL,
  `board_hit` INT NULL DEFAULT '0',
  `board_write_time` TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,
  PRIMARY KEY (`board_no`),
  CONSTRAINT `board_to_users_user_id_fk`
    FOREIGN KEY (`user_id`)
    REFERENCES `ssafypjt`.`users` (`user_id`))
ENGINE = InnoDB
AUTO_INCREMENT = 1
COLLATE = utf8mb4_0900_ai_ci;


-- -----------------------------------------------------
-- Table `ssafypjt`.`notice`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `ssafypjt`.`notice` (
  `notice_no` INT NOT NULL AUTO_INCREMENT,
  `user_id` VARCHAR(16) NULL DEFAULT NULL,
  `notice_title` VARCHAR(100) NULL DEFAULT NULL,
  `notice_content` VARCHAR(2000) NULL DEFAULT NULL,
  `notice_hit` INT NULL DEFAULT '0',
  `notice_write_time` TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,
  PRIMARY KEY (`notice_no`))
ENGINE = InnoDB
COLLATE = utf8mb4_0900_ai_ci;

-- -----------------------------------------------------
-- Table `ssafypjt`.`memo`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `ssafypjt`.`memo` ;

CREATE TABLE IF NOT EXISTS `ssafypjt`.`memo` (
  `memo_no` INT NOT NULL AUTO_INCREMENT,
  `user_id` VARCHAR(16) NULL DEFAULT NULL,
  `comment` VARCHAR(500) NULL DEFAULT NULL,
  `memo_time` TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,
  `board_no` INT NULL DEFAULT NULL,
  PRIMARY KEY (`memo_no`),
  CONSTRAINT `memo_to_board_board_no_fk`
    FOREIGN KEY (`board_no`)
    REFERENCES `ssafypjt`.`board` (`board_no`),
  CONSTRAINT `memo_to_users_user_id_fk`
    FOREIGN KEY (`user_id`)
    REFERENCES `ssafypjt`.`users` (`user_id`)
    ON DELETE CASCADE
    ON UPDATE CASCADE)
ENGINE = InnoDB
AUTO_INCREMENT = 1
COLLATE = utf8mb4_0900_ai_ci;

-- -----------------------------------------------------
-- Table `ssafypjt`.`file_info`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `ssafypjt`.`file_info` ;

CREATE TABLE IF NOT EXISTS `ssafypjt`.`file_info` (
  `idx` INT NOT NULL AUTO_INCREMENT,
  `board_no` INT NULL,
  `save_folder` VARCHAR(45) NULL,
  `original_file` VARCHAR(50) NULL,
  `save_file` VARCHAR(50) NULL,
  PRIMARY KEY (`idx`),
  CONSTRAINT `file_info_to_board_board_no_fk`
    FOREIGN KEY (`board_no`)
    REFERENCES `ssafypjt`.`board` (`board_no`)
    ON DELETE CASCADE
    ON UPDATE CASCADE)
ENGINE = InnoDB;


-- --------------------------------

-- -----------------------------------------------------
-- Base data Setting
-- -----------------------------------------------------
insert into users(user_id, user_name, user_pwd, user_email_id) values("ssafy", "전싸피", "1234", "Little.J");
insert into users(user_id, user_name, user_pwd, user_email_id) values("tester", "테스터", "9999", "TESTER");
insert into users(user_id, user_name, user_pwd, user_email_id) values("admin", "관리자", "admin", "ADMIN");


insert into board(user_id, board_title, board_content) 
values ("ssafy", "제목 11", "내용 11"),
("ssafy", "제목 22", "내용 22"),
("ssafy", "제목 33", "내용 33"),
("ssafy", "제목 44", "내용 44"),
("ssafy", "제목 55", "내용 55"),
("ssafy", "제목 66", "내용 66"),
("ssafy", "제목 77", "내용 77"),
("ssafy", "제목 88", "내용 88"),
("admin", "관리자-제목 11", "관리자-내용 11"),
("admin", "관리자-제목 22", "관리자-내용 22");

insert into badword(fword) 
values("사과"),
("오렌지"),
("포도");